!function(){"use strict";class e{constructor(e,t){let{data:s,handleImageClick:n}=e;this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=n}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=`Photo of ${this._name}`,this._cardCaption=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._cardCaption.textContent=this._name,this._setEventListeners(),this._cardElement}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteCard())),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({link:this._link,text:this._name})))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput(this._inputEls))return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e){return e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose(e){27===e.which&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class o extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){return this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._formValues={},this._inputList.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}setEventListeners(){this._popupElement.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const r=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),a=document.querySelector("#add-card-modal"),l=(document.querySelector("#image-popup"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),c=document.querySelector("#profile-decription-input"),u=i.querySelector(".modal__form"),d=(document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__add-button")),_={popupSelector:"#image-popup"},m=new class extends n{constructor(e){super(e),this._modalImageEl=this._popupElement.querySelector(".modal__image"),this._modalCaption=this._popupElement.querySelector(".modal__caption")}open(e){this._modalImageEl.src=e.link,this._modalImageEl.alt=e.name,this._modalCaption.textContent=e.text,super.open()}}(_),p=new class{constructor(e,t){this._name=document.querySelector(e),this._job=document.querySelector(t)}getUserInfo(){return this._userInfo={name:this._name.textContent,description:this._job.textContent},this._userInfo}setUserInfo(e,t){this._name.textContent=e,this._job.textContent=t}}(".profile__title",".profile__description"),h=t=>new e({data:t,handleImageClick:e=>{m.open(e)}},"#card-template").getView(),E=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=h(e);E.addItem(t)}},".cards__list"),S=new o("#profile-edit-modal",(e=>{!function(e){const{title:t,description:s}=e;p.setUserInfo(t,s),S.close()}(e)})),f=new o("#add-card-modal",(e=>{!function(e){const t={name:e.title,link:e.url},s=h(t);E.addItem(s)}(e)})),v=new t(s,u),g=new t(s,a);E.renderItems([{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}]),m.setEventListeners(),S.setEventListeners(),f.setEventListeners(),v.enableValidation(),g.enableValidation(),r.addEventListener("click",(function(){!function(){const{name:e,description:t}=p.getUserInfo();l.value=e,c.value=t}(),S.open()})),d.addEventListener("click",(()=>{g.toggleButtonState(),f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixHQUNBVixFQUFVeEQsTUFDWixJQU9BeUIsRUFBaUI1RSxpQkFBaUIsU0FBUyxLQUN6Q29ILEVBQWlCbkYsb0JBQ2pCOEUsRUFBUzVELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19pbWFnZVwiXG4gICAgKS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG5cbiAgICB0aGlzLl9jYXJkQ2FwdGlvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fY2FyZENhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vXCIuY2FyZF9fbGlrZS1idXR0b25cIlxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xuXG4gICAgLy9cIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpO1xuXG4gICAgLy9cIiNpbWFnZS1wb3B1cFwiXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCB0ZXh0OiB0aGlzLl9uYW1lIH0pXG4gICAgICApO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBFU0NfS0VZQ09ERSA9IDI3O1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBwcmV2aWV3UG9wdXA6IFwiI2ltYWdlLXBvcHVwXCIsXG59O1xuIiwiaW1wb3J0IHsgRVNDX0tFWUNPREUgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC53aGljaCA9PT0gRVNDX0tFWUNPREUpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG5cbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goXG4gICAgICAoaW5wdXQpID0+ICh0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcblxuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7XG4gIGhhbmRsZUVzY2FwZSxcbiAgY2xvc2VQb3B1cCxcbiAgb3BlblBvcHVwLFxuICBoYW5kbGVQb3B1cENsb3NlLFxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBzZWxlY3RvcnMsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmNvbnN0IGNhcmREYXRhID0ge1xuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG59O1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBpbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wb3B1cFwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVjcmlwdGlvbi1pbnB1dFwiXG4pO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG4vLyBJbnN0YW5jZXMgb2YgdGhlIENsYXNzZXNcbmNvbnN0IHNlbGVjdG9yID0geyBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJldmlld1BvcHVwIH07XG5jb25zdCBjYXJkUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9yKTtcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmQpID0+IHtcbiAgY29uc3QgY2FyZEVsID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogY2FyZCxcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6IChpbWdEYXRhKSA9PiB7XG4gICAgICAgIGNhcmRQcmV2aWV3UG9wdXAub3BlbihpbWdEYXRhKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXG4gICk7XG4gIHJldHVybiBjYXJkRWwuZ2V0VmlldygpO1xufTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsID0gcmVuZGVyQ2FyZChpdGVtKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsKTtcbiAgICB9LFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cbik7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLCAob2JqKSA9PiB7XG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KG9iaik7XG59KTtcblxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCAob2JqKSA9PiB7XG4gIGhhbmRsZVBob3RvQWRkU3VibWl0KG9iaik7XG59KTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBwcm9maWxlRWRpdEZvcm1cbik7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRDYXJkTW9kYWwpO1xuXG4vL0luaXRpYWxpemUgYWxsIGluc3RhbmNlc1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcbmNhcmRQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KG9iaikge1xuICBjb25zdCB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9ID0gb2JqO1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pO1xuICBlZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUGhvdG9BZGRTdWJtaXQob2JqKSB7XG4gIGNvbnN0IGNhcmREYXRhID0ge1xuICAgIG5hbWU6IG9iai50aXRsZSxcbiAgICBsaW5rOiBvYmoudXJsLFxuICB9O1xuICBjb25zdCBjYXJkRWwgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWwpO1xufVxuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcbn1cblxuZnVuY3Rpb24gb3BlbkVkaXRQcm9maWxlTW9kYWwoKSB7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuICBlZGl0UG9wdXAub3BlbigpO1xufVxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qICAgICAgICAgICAgICAgICBFdmVudCBIYW5kbGVycyAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRQcm9maWxlTW9kYWwpO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgYWRkUG9wdXAub3BlbigpO1xufSk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9tb2RhbEltYWdlRWwgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fbW9kYWxDYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9tb2RhbEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX21vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS50ZXh0O1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvcihuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3VzZXJJbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lSW5wdXQsIGpvYklucHV0KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dDtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2JJbnB1dDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiX2NhcmRFbGVtZW50Iiwic3JjIiwiYWx0IiwiX2NhcmRDYXB0aW9uIiwiX2xpa2VCdXR0b24iLCJ0ZXh0Q29udGVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInRleHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ3aGljaCIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZE5ld0NhcmRCdXR0b24iLCJmaXJzdEVsZW1lbnRDaGlsZCIsInNlbGVjdG9yIiwiY2FyZFByZXZpZXdQb3B1cCIsIl9tb2RhbEltYWdlRWwiLCJfbW9kYWxDYXB0aW9uIiwidXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9qb2IiLCJnZXRVc2VySW5mbyIsIl91c2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInJlbmRlckNhcmQiLCJjYXJkIiwiaW1nRGF0YSIsImNhcmRTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaXRlbSIsImNhcmRFbCIsImVkaXRQb3B1cCIsIm9iaiIsInRpdGxlIiwiaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQiLCJhZGRQb3B1cCIsImNhcmREYXRhIiwidXJsIiwiaGFuZGxlUGhvdG9BZGRTdWJtaXQiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9